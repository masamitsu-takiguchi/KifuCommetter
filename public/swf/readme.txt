========================================================================

                     フラ盤Single/Multi  β0.80

                              2010.04

             by Fireworks (thirdfilerook@gmail.com)

========================================================================

【１】はじめに

  「フラ盤Single」および「フラ盤Multi」は、KIF形式またはCSA形式の棋譜ファイルを
  アニメーション付きで再生する、棋譜再現プレーヤーです。

  「フラ盤Single」・・・任意の棋譜ファイル１つを再生可能です。
  「フラ盤Multi」・・・リストファイルに記述した棋譜ファイルを、
                       ウィンドウ左下のプルダウンメニューからまとめて閲覧可能です。
                       リストファイルは任意に編集可能です。
  下記URLもご参照ください。
  http://f11.aaa.livedoor.jp/~uzway/flaban/index.html


【２】動作環境

  Version 6以降のFlash Playerがプラグインされた環境であれば、再生可能です。


【３】配布内容

  本体パッケージは LHA32 x flaban.lzh として展開してください。
  以下のディレクトリ構成で展開されます。

  flaban
    +--readme.txt        : このファイルです。
    +--flaban.swf        : Flashムービーファイル。フラ盤本体です。ファイル名は何でも構いません。
    +--kif_sample1.kif  : KIF形式の棋譜ファイルサンプルその１です。ファイル名は何でも構いません。
    +--kif_sample2.kif  : KIF形式の棋譜ファイルサンプルその２です。
    +--csa_sample1.csa  : CSA形式の棋譜ファイルサンプルその１です。
    +--csa_sample2.csa  : CSA形式の棋譜ファイルサンプルその２です。
    +--list_sample.txt   : 棋譜リストファイルのサンプルです。ファイル名は何でも構いません。
    +--html_sample.html  : フラ盤を貼り付けたHTMLファイルのサンプルです。
                              フラ盤を組み込んだHTMLファイルを作成する際の参考になさってください。


【４】起動説明

  HTMLファイルまたはブログに、【５】で示すコードを記述します。
  そのコード内で指定したURLに、「flaban.swf」ファイルと棋譜ファイルを置いておきます。
  （フラ盤マルチであればリストファイルも置いておきます。）

  HTMLファイルまたはブログを開くと、そのページにフラ盤が組み込まれて表示されます。


【５】ホームページまたはブログに貼り付ける内容

  ①「フラ盤Single」「フラ盤Multi」共通
    フラ盤を貼り付けたい位置に、下記のタグを貼り付けてください。ただし一部修正が必要です。

    <script>var code = ""; code += '<object data="flaban.swf" width="490" height="350" type="application/x-shockwave-flash"><param name="movie" value="flaban.swf"/><param name=FlashVars value="kifuName=kif_sample1.kif"><param name=bgcolor value=#ccff99></object>'; document.write(code); </script>

    URL「flaban.swf」のところ（２箇所）を、貴方がSWFファイルを置いたURLに変更して下さい。
    例えば、「http://f11.aaa.livedoor.jp/~uzway/flaban/flaban.swf」のような感じです。

    ●貼り付けサイズ・・・デフォルトサイズは「width="490" height="350"」が示すとおり幅490×縦350（横縦比７：５）となっていますが、これは任意に変更可能です。
    また、bgcolorの「#ccff99」のところを変更すれば、背景色を任意に変更することが可能です。カラーパレットについてはhttp://web-img.com/color/safe.phpなどを参照下さい。 
    ●盤の向き・・・上記タグ中、<param name=FlashVars value="kifuName=kif_sample1.kif">の「.kif」の後に「&reverse=true」を追加すると、盤が反転した状態を初期状態にできます。
                    例：<param name=FlashVars value="kifuName=kif_sample1.kif&reverse=true">
    ●(Ｃ)ボタン非表示・・・同様に「.kif」の後に「&c_disable=true」を追加すると、(Ｃ)ボタンを非表示にできます。盤反転と併用可能です。
                    例：<param name=FlashVars value="kifuName=kif_sample1.kif&c_disable=true">
    続いて、「フラ盤Single」と「フラ盤Multi」ごとに下記のようにさらに変更します。

  ②「フラ盤Single」用の変更内容
    「kifuName」として与えられている「kif_sample1.kif」のところを、貴方が棋譜ファイルを置いたURLとしてください。
    例えば、「http://f11.aaa.livedoor.jp/~uzway/flaban/kif_sample1.kif」のような感じです。
    ①、②の結果、下記の例のようになります（改行は入れないで貼り付けてください！）。

    <script>var code = ""; code += '<object data="http://f11.aaa.livedoor.jp/~uzway/flaban/flaban.swf" width="490" height="350" type="application/x-shockwave-flash"><param name="movie" value="http://f11.aaa.livedoor.jp/~uzway/flaban/flaban.swf"/><param name=FlashVars value="kifuName=http://f11.aaa.livedoor.jp/~uzway/flaban/kif_sample1.kif"><param name=bgcolor value=#ccff99></object>'; document.write(code); </script>

  ③「フラ盤Multi」用の変更内容
    「kifuName」を「listName」に修正してください。
    続いて、「kif_sample1.kif」のところを、貴方がリストファイル（棋譜ファイルではありません！）を置いたURLとしてください。
    例えば、「http://f11.aaa.livedoor.jp/~uzway/flaban/list_sample.txt」のような感じです。
    
    ①、③結果、下記の例のようになります（改行は入れないで貼り付けてください！）。

    <script>var code = ""; code += '<object data="http://f11.aaa.livedoor.jp/~uzway/flaban/flaban.swf" width="490" height="350" type="application/x-shockwave-flash"><param name="movie" value="http://f11.aaa.livedoor.jp/~uzway/flaban/flaban.swf"/><param name=FlashVars value="listName=http://f11.aaa.livedoor.jp/~uzway/flaban/list_sample.txt"><param name=bgcolor value=#ccff99></object>'; document.write(code); </script>

  ★ブログに貼り付ける場合について・・・
  「ウノウラボ ブログパーツ貼り付けタグのまとめ＋Googleガジェット＠はてな」
  （http://labs.unoh.net/2007/08/google_1.html）にて、
  OBJECT/EMBED、SCRIPT、IFRAMEタグ利用が「○」となっているブログにのみ貼り付けられる見込みです。
  現状、「livedoor Blog」「ココログ」「So-net blog」への貼り付け成功を確認しています。


【６】使い方

【６－１】ボタンについて

  (＞)・・・一手進めます。　★補足：キーボードの右キーでも一手進めることができます。
  (＜)・・・一手戻します。　★補足：キーボードの左キーでも一手戻すことができます。
  (>|)・・・最後の局面まで進めます。変化手順再生中は、変化手順の最後の局面まで進めます。
  (|<)・・・最初の局面まで戻します。

  (>>)・・・自動早送り再生を始めます。
  (<<)・・・自動巻き戻し再生を始めます。
  (■)（自動再生中のみ）・・・自動再生モードを終了します。
  [|<]・・・変化手順再生中のみ表示されます。分岐局面に戻ります。

  (Ｆ)・・・フリーモードを開始／終了します。フリーモードについては【５－３】を参照ください。
  (ｉ)・・・「棋戦」「戦型」「対局場所」「持ち時間」「開始日時」「終了日時」、
　　　　　　さらにKIF形式の棋譜の場合はユーザー定義の情報を閲覧することができます
            （注：棋譜がそれらの情報を持っている場合のみ）。
  (Ａ)・・・アニメーション速度スライドバーを表示／非表示します。
  (Ｃ)・・・閲覧中の棋譜の全文をコメント欄に表示します。
            これをコピーして用いることで、簡単に棋譜ファイルが作成できます。ご活用下さい。

  ※自動再生中でも、「一手戻す」、「一手進める」、「初期局面へ移動」、「最終局面へ移動」を行なうことが可能です。
  ※また、自動再生中に(Ｆ)ボタンを押すと、自動再生を解除してフリーモードにそのまま移行します。

【６－２】スライドバーについて

  アニメーション速度スライドバー・・・移動開始から着手までの駒の速度を変更できます。
  再生速度スライドバー（自動再生モード中のみ）・・・自動再生における指し手の速度を変更できます。

【６－３】フリーモードについて

  通常時または自動再生モード中に(Ｆ)ボタンを押すと、フリーモードが開始されます。
  このとき自動再生モードは終了します。
  フリーモード中は、ドラッグ＆ドロップで自由に駒を動かすことができます。
  駒の方向・表裏を変えたい場合は、下記の位置に置いてください。
    ・先手駒・表　・・・先手の駒台エリア
    ・先手駒・裏　・・・先手の「成駒化」エリア
    ・後手駒・表　・・・後手の駒台エリア
    ・後手駒・裏　・・・後手の「成駒化」エリア

  フリーモード中に(Ｆ)ボタンを押すと、通常モードに戻ります。

【６－４】変化手順について
  変化手順を持つKIF形式の棋譜ファイルの場合、分岐局面にて本譜の手と変化の手を選択できるメニューが現れます。
  変化の手を選ぶと、変化手順に進みます。変化手順再生中、分岐点に戻れるボタンが画面下部に現れます。

【６－５】その他

  手数が下部の枠に表示されます。
  また、棋譜データが対局者名、消費時間、コメントを持っていれば、それらが下部の枠に表示されます。

  ★棋譜再生中、表示されるコメントについて・・・
      ●CSA形式の棋譜の場合・・・
        「'」で始まる行のみがコメント扱いとなります。
        「$」で始まる行は詳細情報表示のみに用いられ、コメント扱いとはなりません。
         CSA形式については「CSA標準棋譜ファイル形式（V2.2）」（http://www.computer-shogi.org/protocol/record_v22.html）等を参照下さい。

      ●KIF形式またはtxt形式の棋譜の場合・・・
　      「*」または「まで」で始まる行がコメント扱いとなります。


【７】配布・転載等

  ネット・オンライン上での再配布は許可しません。
  ただし作者に許可された場合はその限りではありません。
  再配布時には次のことをお守りください。
  ・入手時と同じ状態のファイルに限ります。
  ・中身やファイル名の変更を行ってはいけません。

  紹介はご自由に行ってくださって結構です。
  雑誌／書籍等に掲載される場合はご連絡を頂きたく思います。
  その際に、雑誌／書籍の形態、内容によってはお断りさせていただくことがあります。


【８】免責

　本製品を使用して被ったいかなる損害に対しても作者は一切の責任を負いません。
　また、それらを引き起こしたバグの改善やサポートの義務は一切ないものとします。


【９】バージョンアップ履歴

  2008.02  フラ盤Single/Multi  β0.1  初版リリース
  2008.03  フラ盤Single/Multi  β0.2  開始局面コメントが出ないことがある不具合を修正
  2008.03  フラ盤Single/Multi  β0.3  「Yahoo!将棋」のKIF形式棋譜ファイルで生じる不具合を修正

  2008.03  フラ盤Single/Multi  β0.4  各種ボタンのマウスオーバー時、チップヘルプが出るよう変更
                                      棋譜詳細情報を閲覧できるよう(ｉ)ボタンを追加
                                      棋譜全文を表示できるよう(Ｃ)ボタンを追加
                                      キーボードの右キーで一手進め、左キーで１手戻すことができるように変更
                                      CSA棋譜におけるコメントの表示仕様を変更（「$」で始まる行は詳細情報表示のみに用いる）
  2008.05  フラ盤Single/Multi  β0.41 フラ盤Singleにて、CSA形式の棋譜を再生できない不具合を修正
                                      KIF形式の棋譜で、飛香落ちの棋譜を再生できない不具合を修正
                                      フラ盤の背景色設定にて、一部分のみ色が変わらない不具合を修正
  2008.08  フラ盤Single/Multi  β0.5  編集局面からのKIF形式棋譜ファイルの再生に対応
                                      盤反転した状態を初期状態とできる機能を追加
                                      駒落ち棋譜で、上手名、下手名が表示されない不具合を修正
                                      (Ａ)ボタンを追加し、このボタンを押すとアニメ速度切換バーが表示されるように仕様変更（表示スペースの都合上）
                                      １手毎にBGMを付加する機能を追加
  2008.09  フラ盤Single/Multi  β0.51 フラ盤Multiで、持ち駒に玉があったとき、棋譜切換時玉表示がクリアされない不具合を修正
                                      (Ｃ)ボタンを非表示にできる機能を追加
  2008.10  フラ盤Single/Multi  β0.6  指定した手数の局面から表示開始できる機能を追加
                                      フラ盤Multiで、一局毎に盤の向きを指定できる機能を追加
  2008.11  フラ盤Single/Multi  β0.61 非表示指定の(Ｃ)ボタンが特定操作で表示されてしまう不具合を修正
                                      KIF形式の棋譜で、消費時間100分を越える一手の消費時間が正しくカウントされない不具合を修正
  2009.02  フラ盤Single/Multi  β0.7  KIF形式の棋譜で、変化手順の再生に対応
  2009.02  フラ盤Single/Multi  β0.71 変化手順再生中にフリーモードに入ったときの不具合を修正
  2009.04  フラ盤Single/Multi  β0.72 特定の手順で、変化手順から本筋に戻ったときに、駒と最終着手マークの重なり順が逆になる不具合を修正
  2009.05  フラ盤Single/Multi  β0.73 手を戻したとき、成り駒が不成りの駒に戻ってしまうことがある不具合を修正
  2009.05  フラ盤Single/Multi  β0.74 KIF形式の棋譜で、指し手の無い棋譜の盤面を表示できない不具合を修正
  2009.06  フラ盤Single/Multi  β0.75 ","を含むコメントを正しく表示できない不具合を修正（CSA形式）
  2009.06  フラ盤Single/Multi  β0.76 ","を含むコメントを正しく表示できない不具合を修正（KIF形式）
  2009.10  フラ盤Single/Multi  β0.77 （ｉ）ボタンを押したときに表示される棋譜詳細情報を、コメント欄に表示するよう変更
                                      KIF形式の棋譜で、ユーザー定義の情報も棋譜詳細情報に表示するよう変更
                                      KIF形式の棋譜で、「図：」で始まる行でも表示開始局面を指定できるよう変更
　　　　　　　　　　　　　　　　　　　標準の縦横比（５：７）以外でフラ盤を貼り付けたとき、枠外のアイテムが見えてしまっていた不具合を修正
  2009.12  フラ盤Single/Multi  β0.78 KIF形式の棋譜で、駒落ちの場合、「▲下手／△上手」と表示するよう変更
　　　　　　　　　　　　　　　　　　　フラ盤Multiで、対局者名情報を持たない棋譜に切り換えたとき、前の棋譜の対局者名が表示されてしまう不具合を修正
  2010.04  フラ盤Single/Multi  β0.79 フリーモードで開始できる機能を追加（棋譜毎に設定）
  2010.04  フラ盤Single/Multi  β0.80 フラ盤Multiで、すべての棋譜をまとめてフリーモードで開始できる機能を追加
　　　　　　　　　　　　　　　　　　　変化手順再生中に盤面を反転させたときの不具合を修正
　　　　　　　　　　　　　　　　　　　変化手順を持つ棋譜で、最終局面で(>|)を押すと固まることがある不具合を修正